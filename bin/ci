#!/bin/bash

set -e

export NODE_ENV=test
export DEFAULT_DIR=tests

BIN='mocha --reporter spec --compilers coffee:coffee-script/register '

# Currently green
$BIN tests/unit/config.coffee
$BIN tests/unit/normalizer.coffee
$BIN tests/unit/pouch.coffee
$BIN tests/unit/sync.coffee
$BIN tests/unit/local/index.coffee
$BIN tests/unit/local/filesystem.coffee
$BIN tests/unit/remote/couch.coffee

# Currently red
$BIN tests/unit/*.coffee

$BIN tests/operations/*.coffee

$BIN tests/functional/remote.coffee
#$BIN tests/functional/local.coffee
#$BIN tests/functional/local_change.coffee

./node_modules/.bin/gulp lint
